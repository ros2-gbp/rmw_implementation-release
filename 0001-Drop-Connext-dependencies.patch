From 043e1a6a0fdb32f3575fe8255ff646384f395192 Mon Sep 17 00:00:00 2001
From: Scott K Logan <logans@cottsay.net>
Date: Tue, 9 Mar 2021 16:07:42 -0800
Subject: [PATCH 1/2] Drop Connext dependencies

This RMW isn't available for RHEL.

Signed-off-by: Scott K Logan <logans@cottsay.net>
---
 package.xml          | 1 -
 rpm/template.spec.em | 4 ++++
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/package.xml b/package.xml
index 2e19946d1b9c..84280d155cd6 100644
--- a/package.xml
+++ b/package.xml
@@ -23,7 +23,6 @@
   <build_depend>rmw</build_depend>
 
   <!-- Explicit group resolution - see ros-infrastructure/catkin_pkg#369 -->
-  <build_depend condition="$DISABLE_GROUPS_WORKAROUND != 1">rmw_connextdds</build_depend>
   <build_depend condition="$DISABLE_GROUPS_WORKAROUND != 1">rmw_cyclonedds_cpp</build_depend>
   <build_depend condition="$DISABLE_GROUPS_WORKAROUND != 1">rmw_fastrtps_cpp</build_depend>
   <build_depend condition="$DISABLE_GROUPS_WORKAROUND != 1">rmw_fastrtps_dynamic_cpp</build_depend>
diff --git a/rpm/template.spec.em b/rpm/template.spec.em
index bebb96b6a6a5..7755dbc127fa 100644
--- a/rpm/template.spec.em
+++ b/rpm/template.spec.em
@@ -1,3 +1,7 @@
+@{
+# Connext is not available for RHEL - ignore any deps related to it
+BuildDepends = [d for d in BuildDepends if 'connext' not in d]
+}@
 %bcond_without tests
 %bcond_without weak_deps
 
-- 
2.49.0

